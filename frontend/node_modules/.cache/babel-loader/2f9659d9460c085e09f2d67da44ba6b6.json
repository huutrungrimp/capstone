{"ast":null,"code":"import authServices from '../services/authServices';\nvar initialState = {\n  authServices: authServices(),\n  details: []\n};\n\nvar authReducer = function authReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case 'USER_LOGIN':\n      {\n        console.log(action.details);\n        fetch('http://127.0.0.1:8000/api/token/', {\n          method: 'POST',\n          headers: {\n            'Accept': 'application/json, text/plain, */*',\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(action.details)\n        }).then(function (res) {\n          return res.json();\n        }).then(function (res) {\n          console.log(res);\n          localStorage.setItem('token', res.token);\n        }).catch(function (err) {\n          console.error(err);\n        });\n        fetch('http://127.0.0.1:8000/accounts/login', {\n          method: 'POST',\n          headers: {\n            'Accept': 'application/json, text/plain, */*',\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(action.details)\n        }).then(function (res) {\n          return res.json();\n        }).then(function (res) {\n          console.log(res);\n\n          var user = function (_ref) {\n            var username = _ref.username;\n            return {\n              username: username\n            };\n          }(res);\n\n          localStorage.setItem('userDetail', JSON.stringify(user));\n          console.log(user);\n        }).catch(function (err) {\n          console.error(err);\n        });\n        return {};\n      }\n\n    case 'USER_REGISTER':\n      {\n        fetch('http://localhost:8000/accounts/register', {\n          method: 'POST',\n          headers: {\n            'Accept': 'application/json, text/plain, */*',\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(action.details)\n        }).then(function (res) {\n          return res.json();\n        }).then(function (res) {\n          console.log(res);\n          localStorage.setItem('token', res.password);\n\n          var user = function (_ref2) {\n            var username = _ref2.username,\n                role = _ref2.role;\n            return {\n              username: username,\n              role: role\n            };\n          }(res);\n\n          localStorage.setItem('userDetail', JSON.stringify(user));\n        }).catch(function (err) {\n          console.error(err);\n        });\n        return {};\n      }\n    // case 'LOAD_NAV': {\n    //     return {}\n    // }\n\n    case 'USER_LOGOUT':\n      {\n        localStorage.removeItem('userDetail');\n        localStorage.removeItem('token');\n        return {};\n      }\n\n    default:\n      return {\n        state: state\n      };\n  }\n\n  ;\n};\n\nexport default authReducer;","map":{"version":3,"sources":["C:/Users/HaTrung/Documents/projects/August/august/src/store/reducers/authReducer.js"],"names":["authServices","initialState","details","authReducer","state","action","type","console","log","fetch","method","headers","body","JSON","stringify","then","res","json","localStorage","setItem","token","catch","err","error","user","username","password","role","removeItem"],"mappings":"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","sourcesContent":["import authServices from '../services/authServices';\r\nconst initialState = {\r\n    authServices: authServices(),\r\n    details: []\r\n}\r\n\r\nconst authReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n       \r\n        case 'USER_LOGIN':\r\n            {\r\n                console.log(action.details)\r\n                fetch('http://127.0.0.1:8000/api/token/', {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Accept': 'application/json, text/plain, */*',\r\n                        'Content-Type': 'application/json'\r\n                    },\r\n                    body: JSON.stringify(action.details)\r\n                    })\r\n                    .then(res => res.json())\r\n                    .then(res => {                \r\n                        console.log(res);\r\n                        localStorage.setItem('token', res.token)\r\n                    })\r\n                    .catch(err => {console.error(err)\r\n                }) \r\n\r\n                fetch('http://127.0.0.1:8000/accounts/login', {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Accept': 'application/json, text/plain, */*',\r\n                        'Content-Type': 'application/json'\r\n                    },\r\n                    body: JSON.stringify(action.details)\r\n                    })\r\n                    .then(res => res.json())\r\n                    .then(res => {                \r\n                        console.log(res);                        \r\n                        const user = (({ username }) => ({ username}))(res);\r\n                        localStorage.setItem('userDetail', JSON.stringify(user)) \r\n                        console.log(user)\r\n                    })\r\n                    .catch(err => {console.error(err)\r\n                }) \r\n\r\n                return {}\r\n            }  \r\n\r\n        \r\n\r\n        case 'USER_REGISTER':         \r\n            {       \r\n                fetch('http://localhost:8000/accounts/register', {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Accept': 'application/json, text/plain, */*',\r\n                        'Content-Type': 'application/json'\r\n                    },\r\n                    body: JSON.stringify(action.details)\r\n                    })\r\n                    .then(res => res.json())\r\n                    .then(res => {                \r\n                        console.log(res);\r\n                        localStorage.setItem('token', res.password)\r\n                        const user = (({ username, role }) => ({ username, role}))(res);\r\n                        localStorage.setItem('userDetail', JSON.stringify(user)) \r\n                    })\r\n                    .catch(err => {console.error(err)\r\n                }) \r\n\r\n                return {}\r\n            }\r\n\r\n        // case 'LOAD_NAV': {\r\n        //     return {}\r\n        // }\r\n\r\n        \r\n        case 'USER_LOGOUT': {\r\n            localStorage.removeItem('userDetail');\r\n            localStorage.removeItem('token');\r\n            return {}\r\n        }\r\n\r\n        default: return {state}\r\n        };    \r\n}\r\n\r\nexport default authReducer"]},"metadata":{},"sourceType":"module"}